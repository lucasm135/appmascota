<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DNI Interactivo para Mi Perro</title>

    <link rel="stylesheet" href="estilos-interactivo.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Librería para previsualizar imagen -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/exif-js/2.3.0/exif.min.js"></script>
</head>

<body>
    <div class="contenedor">
        <!-- Botón de Modo Edición/Vista -->
        <div class="modo-botones">
            <button id="btnVer" class="btn-modo activo">
                <i class="fas fa-eye"></i> Ver DNI
            </button>
            <a href="editar.html" class="btn-modo">
                 <i class="fas fa-edit"></i> Editar Datos
            </a>
        </div>

        <!-- MODO VISUALIZACIÓN -->
        <div id="modoVisualizacion" class="modo-activo">
            <header class="encabezado">
                <h1><i class="fas fa-paw"></i> DOCUMENTO DE IDENTIDAD CANINO <i class="fas fa-paw"></i></h1>
                <p class="subtitulo" id="subtituloVista">Compañero de vida y aventuras</p>
            </header>

            <main class="tarjeta">
                <section class="seccion-foto">
                    <div class="marco-foto">
                        <img src="" alt="Foto del perro" id="fotoVista">
                        <div id="sinFotoVista" class="sin-foto">
                            <i class="fas fa-camera"></i>
                            <p>Sin foto cargada</p>
                        </div>
                    </div>
                    <div class="info-rapida">
                        <h2><i class="fas fa-dog" id="iconoVista"></i> <span id="nombreVista">[Nombre del Perro]</span></h2>
                        <p><strong>Raza:</strong> <span id="razaVista">[Raza]</span></p>
                        <p><strong>Color:</strong> <span id="colorVista">[Color]</span></p>
                        <p><strong>Sexo:</strong> <span id="sexoVista">[Sexo]</span></p>
                        <p><strong>Microchip:</strong> <span id="microchipVista">[Número]</span></p>
                    </div>
                </section>

                <section class="seccion-datos">
                    <h3><i class="fas fa-address-card"></i> Datos Personales</h3>
                    <ul class="lista-datos">
                        <li><i class="fas fa-calendar-alt"></i> <strong>Nacimiento:</strong> <span id="nacimientoVista">[DD/MM/AAAA]</span></li>
                        <li><i class="fas fa-home"></i> <strong>Domicilio:</strong> <span id="domicilioVista">[Dirección]</span></li>
                        <li><i class="fas fa-user"></i> <strong>Tutor:</strong> <span id="tutorVista">[Nombre del dueño]</span></li>
                        <li><i class="fas fa-phone"></i> <strong>Teléfono:</strong> <span id="telefonoVista">[Número]</span></li>
                        <li><i class="fas fa-envelope"></i> <strong>Email:</strong> <span id="emailVista">[Email]</span></li>
                        <li><i class="fas fa-stethoscope"></i> <strong>Veterinario:</strong> <span id="vetVista">[Clínica]</span></li>
                    </ul>

                    <h3><i class="fas fa-heartbeat"></i> Información Médica</h3>
                    <ul class="lista-datos">
                        <li><strong>Vacunas:</strong> <span id="vacunasVista">[Estado]</span></li>
                        <li><strong>Alergias:</strong> <span id="alergiasVista">[Información]</span></li>
                        <li><strong>Tratamientos:</strong> <span id="tratamientosVista">[Detalles]</span></li>
                    </ul>

                    <h3><i class="fas fa-info-circle"></i> Observaciones</h3>
                    <p id="observacionesVista">[Características únicas del perro]</p>

                    <div class="firma">
                    <p>Firma del Tutor: <span id="firmaVista">[Nombre]</span></p>
                    <div class="huella-container">
                        <img src="" alt="Huella" id="huellaVista" class="huella">
                    </div>
                    
                    <!-- NUEVO: SECCIÓN QR PARA EL COLLAR -->
                    <div class="qr-section" id="qrSection">
                        <h4><i class="fas fa-qrcode"></i> Código QR para el Collar</h4>
                        <div class="qr-container">
                            <div id="qrCodeCanvas"></div>

                            <div id="qrPlaceholder" class="qr-placeholder">
                                <i class="fas fa-dog"></i>
                                <p>Genera un QR con tus datos</p>
                            </div>
                        </div>
                        <div class="qr-info">
                            <p><i class="fas fa-info-circle"></i> Escanea este código si me encuentras perdido</p>
                            <button id="generarQR" class="btn-qr">
                                <i class="fas fa-sync-alt"></i> Generar QR
                            </button>
                            <button id="descargarQR" class="btn-qr">
                                <i class="fas fa-download"></i> Descargar QR
                            </button>
                            <button id="imprimirQR" class="btn-qr">
                                <i class="fas fa-print"></i> Imprimir Solo QR
                            </button>
                        </div>
                        <div class="qr-instructions">
                            <h5><i class="fas fa-print"></i> Instrucciones para el collar:</h5>
                            <ol>
                                <li>Genera el QR con el botón "Generar QR"</li>
                                <li>Descarga la imagen con "Descargar QR"</li>
                                <li>Imprime en papel resistente al agua</li>
                                <li>Recorta y pon en una chapa para collar</li>
                                <li>Laminar para mayor durabilidad</li>
                            </ol>
                        </div>
                    </div>
                    
                    <p class="fecha-emision"><strong>Última actualización:</strong> <span id="actualizacionVista">[Fecha]</span></p>
                </div>
                </section>
            </main>
        </div>





        <footer class="pie">
            <p>DNI Interactivo para <span id="nombreFooter">tu perro</span> | 
                <button id="btnExportar" class="btn-exportar">
                    <i class="fas fa-file-pdf"></i> Exportar a PDF
                </button>
                <button id="btnImportar" class="btn-exportar">
                    <i class="fas fa-file-import"></i> Importar Datos
                </button>
                <button id="btnBorrar" class="btn-exportar">
                    <i class="fas fa-trash"></i> Borrar Todo
                </button>
            </p>
            <p class="nota">Creado con <i class="fas fa-heart"></i> para tu compañero fiel</p>
        </footer>
    </div>

    <!-- Input oculto para importar -->
    <input type="file" id="importInput" accept=".json" style="display: none;">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <script src="script.js"></script>
</body>
</html>

  <!--  https://github.com/lucasm135/appmascota.git  -->